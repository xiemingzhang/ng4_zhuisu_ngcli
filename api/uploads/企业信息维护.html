<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>企业信息维护</title>
    <!-- Bootstrap core CSS -->
    <link href="src/css/bootstrap.min.css" rel="stylesheet">
    <link href="src/fonts/css/font-awesome.min.css" rel="stylesheet">
    <link href="src/css/animate.min.css" rel="stylesheet">
    <!-- Custom styling plus plugins -->
    <link href="src/css/custom.css" rel="stylesheet">
    <!--fileinput-->
    <link href="src/css/fileinput/fileinput.css" media="all" rel="stylesheet" type="text/css" />
    <!-- <link href="src/css/floatexamples.css" rel="stylesheet" type="text/css" /> -->
    <!-- crop -->
    <link rel="stylesheet" href="src/css/crop/crop.css" type="text/css" />
    <script src="src/js/jquery.min.js"></script>
    <!-- <script src="src/js/nprogress.js"></script> -->
    <!--ueditor-->
    <script type="text/javascript" charset="utf-8" src="src/UEditor/ueditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="src/UEditor/ueditor.all.js"> </script>
    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="src/UEditor/lang/zh-cn/zh-cn.js"></script>
    <!-- crop -->
    <script type="text/javascript" src="./src/js/crop/cropbox.js"></script> 
    <script type="text/javascript" src="./src/js/angular.min.js"></script>
    <script type="text/javascript" src="./src/js/xiugaimima.js"></script>
      <!--[if lt IE 9]>
    <script src="../assets/js/ie8-responsive-file-warning.js"></script>
    <![endif]-->
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
        form input[type="text"].err,form input[type="email"].err,form input[type="password"].err{
           border:1px solid #A94442;
        }
    </style>
</head>

<body class="nav-md" ng-app="myApp">
<div class="container body">
    <div class="main_container">
       <div class="col-md-3 left_col">
            <div class="left_col scroll-view">
                <div class="navbar nav_title" style="border: 0;">
                    <a href="#" class="site_title"><i class="fa fa-paw"></i> <span>追溯管理系统</span></a>
                </div>
                <div class="clearfix"></div>
                <br />
                <!-- sidebar menu -->
                <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                    <div class="menu_section">
                        <ul class="nav side-menu">
                            <li><a><i class="fa fa-home"></i> 基础信息管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu" style="display: none">
                                    <li><a href="企业信息维护.html" target="_blank">企业信息维护</a>
                                    </li>
                                    <li><a href="产品信息维护.html" target="_blank">产品信息维护</a>
                                    </li>
                                    <li><a href="产品列表.html" target="_blank">产品列表</a>
                                    </li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-edit"></i> 追溯码管理 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu" style="display: none">
                                    <li><a href="追溯码申请.html" target="_blank">追溯码申请</a>
                                    </li>
                                </ul>
                            </li>
                            <li><a><i class="fa fa-user"></i> 管理员 <span class="fa fa-chevron-down"></span></a>
                                <ul class="nav child_menu" style="display: none">
                                    <li><a href="用户信息管理.html" target="_blank">用户信息管理</a>
                                    </li>
                                     <li><a href="用户信息列表.html" target="_blank">用户信息列表</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- /sidebar menu -->
            </div>
        </div>
        <!-- top navigation -->
        <div class="top_nav">
            <div class="nav_menu">
                <nav class="" role="navigation">
                    <div class="nav toggle">
                        <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                    </div>
                    <ul class="nav navbar-nav navbar-right">
                        <li class="">
                            <a href="javascript:;" class="user-profile dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                <span>测试</span>
                                <span class="fa fa-angle-down"></span>
                            </a>
                            <ul class="dropdown-menu dropdown-usermenu animated fadeInDown pull-right">
                                <li>
                                    <a href="#" data-toggle="modal" data-target="#modifyPaswd">修改密码</a>
                                </li>
                                <li><a href="登录.html"><i class="fa fa-sign-out pull-right"></i> 退出登录</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="modal fade" id="modifyPaswd" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
              <div class="modal-dialog" ng-controller="XiugaiPaswdCtr">
                  <div class="modal-content">
                      <div class="modal-header">
                          <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> -->
                          <h4 class="modal-title" id="openLabel">修改密码</h4>
                      </div>
                      <div class="modal-body">
                          <form class="form-horizontal" id="myForm" name="myForm" ng-submit="submitForm()" >
                              <div class="form-group">
                              <label style="heigth:34px;line-height: 34px;" class="col-sm-2">原始密码</label>
                              <div class="col-sm-5">
                                  <input style="height:34px; width: 100%; text-indent: 7px;" type="text" placeholder="请输入原始密码" 
                                        name="oldPaswd"
                                        ng-model="xiugai.oldPaswd"
                                        ng-class="{'err':myForm.oldPaswd.$invalid && myForm.oldPaswd.$touched }"                                    
                                        ng-required="true"
                                        /> 
                              </div>
                              <div class="col-sm-5">
                                 <span style="heigth:34px;line-height: 34px;" class="text-warning" ng-if="myForm.oldPaswd.$error.required && myForm.oldPaswd.$touched">原始密码不能为空</span>
                              </div>                                        
                              </div>
                              <div class="form-group">
                              <label style="heigth:34px;line-height: 34px;" class="col-sm-2">新密码</label>
                              <div class="col-sm-5">
                                  <input style="height:34px; width: 100%; text-indent: 7px;"  type="password" placeholder="请输入密码" 
                                        name="newPaswd"
                                        ng-model="xiugai.newPaswd"                       
                                        ng-class="{'err':myForm.newPaswd.$invalid && myForm.newPaswd.$touched }"
                                        ng-minlength="8"                                   
                                        ng-pattern="/^(?![a-zA-z]+$)(?!\d+$)(?![!@#$%^&*]+$)[a-zA-Z\d!@#$%^&*]+$/"
                                        ng-required="true"
                                        />
                              </div>
                                <div class="col-sm-5">
                                    <span style="heigth:34px;line-height: 34px;" class="fa fa-check input_result" ng-if="myForm.newPaswd.$valid && myForm.newPaswd.$touched"></span>
                                    <span style="heigth:34px;line-height: 34px;" class="text-warning" ng-if="
                                myForm.newPaswd.$error.required && myForm.newPaswd.$touched">密码不能为空</span>
                                    <span style="heigth:34px;line-height: 34px;" class="text-warning" ng-if="
                                myForm.newPaswd.$error.minlength && myForm.newPaswd.$touched">密码长度至少8位</span>
                                    <span style="heigth:34px;line-height: 34px;" class="text-warning" ng-if="
                                !myForm.newPaswd.$error.minlength && myForm.newPaswd.$error.pattern && myForm.newPaswd.$touched">至少包含字母，数字和符号两种</span>
                                </div>      
                              </div>
                              <div class="form-group">
                              <label style="heigth:34px;line-height: 34px;" class="col-sm-2">确认密码</label>
                              <div class="col-sm-5">
                                  <input style="height:34px; width: 100%; text-indent: 7px;" type="password"  placeholder="请确认密码"  
                                   name="confirmPaswd"
                                   ng-model="xiugai.confirmPaswd"
                                   ng-class="{'err':myForm.confirmPaswd.$invalid && myForm.confirmPaswd.$touched }" 
                                   compare="xiugai.newPaswd"
                                   ng-required="true"
                                    />
                              </div>
                              <div class="col-sm-5">
                                    <span style="heigth:34px;line-height: 34px;" class="fa fa-check input_result" ng-if="myForm.confirmPaswd.$valid && myForm.confirmPaswd.$touched"></span>
                                  <span style="heigth:34px;line-height: 34px;" class="text-warning" ng-if="!myForm.newPaswd.$invalid && myForm.confirmPaswd.$error.required && myForm.confirmPaswd.$touched">密码不能为空</span>
                                    <span style="heigth:34px;line-height: 34px;" class="text-warning" ng-if="!myForm.newPaswd.$invalid && !myForm.confirmPaswd.$error.required && myForm.confirmPaswd.$error.compare  && myForm.confirmPaswd.$touched">两次输入密码不一致</span>
                              </div>
                              </div>
                              <!-- <div class="form-group">
                                  <div class="form-group text-warning" ng-if="!myForm.newPaswd.$invalid && myForm.confirmPaswd.$error.required && myForm.confirmPaswd.$touched">
                                  <p class="col-sm-offset-2 col-sm-8" style="padding:0;margin-bottom: 0;">确认密码不能为空</p></div>
                                 <div class="form-group text-warning" ng-if="!myForm.newPaswd.$invalid && !myForm.confirmPaswd.$error.required && myForm.confirmPaswd.$error.compare  && myForm.confirmPaswd.$touched">
                                 <p class="col-sm-offset-2 col-sm-8" style="padding:0;margin-bottom: 0;">两次输入密码不一致</p></div>
                               </div> --> 
                              <button id="dianjidaili" type="submit" class="btn btn-primary"  style="display:none;"></button>
                              <button id="dianjidaili2" type="button" class="btn btn-primary"  style="display:none;" ng-click="myForm.$setPristine();myForm.$setUntouched();"></button>
                          </form>                                   
                          <div class="clearfix"></div>
                          </div>
                      <div class="clearfix"></div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" style="position: relative;top:3px;" onclick='
                        $("#dianjidaili2").click();$("#myForm")[0].reset();'>取消</button>
                        <button type="button" class="btn btn-primary " data-dismiss="modal" ng-disabled="myForm.$invalid" onclick='$("#dianjidaili").click();$("#myForm")[0].reset();'>确定</button>  
                        <div class="clearfix"></div>                                  
                      </div>
                  </div>
              </div>
          </div>
        <!-- /top navigation -->
        <!-- page content -->
        <div class="right_col" role="main">
            <div class="">
                <div class="page-title">
                    <div class="title_left">
                        <h3>
                            企业信息维护
                        </h3>
                    </div>
                </div>
                <div class="x_panel">
                    <div class="x_content">
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">发证机关</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <select class="form-control xxx" id="provinceList" name="provinceList"><option value="">-请选择-</option>
                                        <option selected="selected" value="11">北京市</option>
                                        <option value="12">天津市</option>
                                        <option value="13">河北省</option>
                                        <option value="14">山西省</option>
                                        <option value="15">内蒙古自治区</option>
                                        <option value="21">辽宁省</option>
                                        <option value="22">吉林省</option>
                                        <option value="23">黑龙江省</option>
                                        <option value="31">上海市</option>
                                        <option value="32">江苏省</option>
                                        <option value="33">浙江省</option>
                                        <option value="34">安徽省</option>
                                        <option value="35">福建省</option>
                                        <option value="36">江西省</option>
                                        <option value="37">山东省</option>
                                        <option value="41">河南省</option>
                                        <option value="42">湖北省</option>
                                        <option value="43">湖南省</option>
                                        <option value="44">广东省</option>
                                        <option value="45">广西壮族自治区</option>
                                        <option value="46">海南省</option>
                                        <option value="50">重庆市</option>
                                        <option value="51">四川省</option>
                                        <option value="52">贵州省</option>
                                        <option value="53">云南省</option>
                                        <option value="54">西藏自治区</option>
                                        <option value="61">陕西省</option>
                                        <option value="62">甘肃省</option>
                                        <option value="63">青海省</option>
                                        <option value="64">宁夏回族自治区</option>
                                        <option value="65">新疆维吾尔自治区</option>
                                        <option value="71">新疆兵团</option>
                                        <option value="72">黑龙江省农垦总局</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12 xiugai_1">生产经营者名称</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="orgID" id="orgID" value="edd45816-cda2-4f9f-9005-af39de8656a4" type="hidden">
                                    <input name="enterPriseName" id="enterPriseName" value="ddd" maxlength="50" class="form-control xxx" type="text">
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12 xiugai_1">生产许可证编号</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="licenceNO" id="licenceNO" value="2222" maxlength="500" class="form-control xxx" type="text">

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">昵称</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="nickName" id="nickName" value="测试" maxlength="20" class="form-control xxx" type="text">
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12 xiugai_1">统一社会信用代码</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="unifiedSocietyCreditCode" id="unifiedSocietyCreditCode" maxlength="50" class="form-control xxx" type="text">
                                </div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">联系人</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="contactPerson" id="contactPerson" class="form-control xxx" type="text">

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">联系人电话</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="contactPerson" id="contactzuoji" class="form-control xxx" type="text">

                                </div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">联系人手机</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                        <input name="contacttel" id="contacttel" maxlength="11" class="form-control xxx" type="text" onblur="(function(){
                            if(!(/^1(3|4|5|7|8)\d{9}$/.test(document.getElementById('contacttel').value)))
                 {document.getElementById('contacttel').value='';
                    $(document.getElementById('contacttel')).attr('placeholder','号码有误，重新输入');}})()"/></div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">联系人邮箱</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="contactmail" id="contactmail"  class="form-control xxx" type="text">

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">企业电话</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="entertel" id="entertel"  class="form-control xxx" type="text">

                                </div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">企业传真</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="enterfax" id="enterfax"  class="form-control xxx" type="text">

                                </div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">企业地址</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="enterposition" id="enterposition"  class="form-control xxx" type="text">

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">企业网站</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="enterweb" id="enterweb"  class="form-control xxx" type="text">

                                </div>
                            </div>
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12">企业微信号</label>
                                <div class="col-md-9 col-sm-9 col-xs-12">
                                    <input name="enterweixin" id="enterweixin" class="form-control xxx" type="text">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class=" col-sm-12 col-xs-12 form-group xiugai_8">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12 xiugai_9">企业Logo</label>
                                <div class="col-md-9 col-sm-9 col-xs-12 kv-main">
                                   <div class="container_crop">
                                      <div class="imageBox hide">
                                        <div class="thumbBox"></div>
                                        <div class="spinner" style="display: none">Loading...</div>
                                        <input type="button" id="btnZoomIn" class="Btnsty_peyton" value="+" style="width: 28px;position:absolute;bottom:30px;right:0;border:0;outline:none;">
                                        <input type="button" id="btnZoomOut" class="Btnsty_peyton" value="-" style="width: 28px;position:absolute;bottom:0;right:0;border:0;outline:none;">
                                      </div>
                                      <div class="action"> 
                                      <button id='btnRemove'  type="button" tabindex="500" title="Clear selected files" class="btn btn-default fileinput-remove fileinput-remove-button hide" style="float:left;margin-right:3px;margin-top:3px;"><i class="glyphicon glyphicon-trash"></i>  <span class="hidden-xs">删除</span></button>
                                      <a id='btnUpLoad' href="#" tabindex="500" title="Upload selected files" class="btn btn-default fileinput-upload fileinput-upload-button hide" style="float:left;margin-right:3px;margin-top:3px;"><i class="glyphicon glyphicon-upload "></i>  <span class="hidden-xs">上传</span></a>
                                        <div class="new-contentarea tc"> <a href="javascript:void(0)" class="upload-img">
                                          <label for="choiceImg"><i class="glyphicon glyphicon-folder-open" style="margin-right:10px;"></i>选择图片</label>
                                          </a>
                                          <input type="file" class="" name="upload" id="choiceImg" />
                                        </div>

                                      </div>
                                      <div class="cropped"></div>                                      
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group xiugai_7">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12 xiugai_6">企业简介</label>
                                <div class="col-md-9 col-sm-9 col-xs-12 dingwei">
                                    <div>
                                           <!-- <textarea rows="3" cols="30" class="xiugai_4 xxx">
                                           </textarea> -->
                                        <script id="editor" type="text/plain" class=" xxx"></script>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group xiugai_7">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12  xiugai_6">企业照片</label>
                                <div class="col-md-9 col-sm-9 col-xs-12   kv-main  ">
                                    <form enctype="multipart/form-data">
                                        <div class="form-group" >
                                            <input id="file-5" type="file" multiple class="file" data-overwrite-initial="false">
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group xiugai_7">
                                <label class="control-label col-md-3 col-sm-3 col-xs-12 xiugai_6">企业资质</label>
                                <div class="col-md-9 col-sm-9 col-xs-12   kv-main  ">
                                    <form enctype="multipart/form-data">
                                        <div class="form-group" >
                                            <input id="file-6" type="file" multiple class="file" data-overwrite-initial="false">
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 col-sm-12 col-xs-12 form-group">
                                <button type="submit" class="btn btn-success" onclick="donghua1(event)">修改</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /page content -->
    </div>
</div>
    <script src="src/js/bootstrap.min.js"></script>
    <!-- bootstrap progress js -->
    <script src="src/js/progressbar/bootstrap-progressbar.min.js"></script>
    <script src="src/js/nicescroll/jquery.nicescroll.min.js"></script>
    <!-- icheck -->
    <script src="src/js/custom.js"></script>
    <!-- daterangepicker -->
    <script type="text/javascript" src="src/js/moment/moment.min.js"></script>
    <!-- input mask -->
    <script src="src/js/input_mask/jquery.inputmask.js"></script>
    <!-- Datatables -->
<!--fileinput-->
<script src="src/js/fileinput/fileinput.js" type="text/javascript"></script>
<script type="text/javascript">

    var ue = new baidu.editor.ui.Editor(
            {
                //initialContent: "请在这里输入正文......",
                //autoClearinitialContent: true, //focus时自动清空初始化时的内容
                initialFrameHeight:250,
                textarea: 'editorContent',      //设置提交时编辑器内容的名字
                autoFloatEnabled: false,
                focus:false,
                //autoHeightEnabled: false,
                sourceEditor: true,
                /*wordCount: false,               //关闭字数统计
                elementPathEnabled: false,      //关闭elementPath*/
                maximumWords: 10240,
                /*scaleEnabled: true*/
                toolbars: [[
                 'fullscreen', 'undo', 'redo',
                'bold', 'italic', 'underline', 'fontborder', 'strikethrough', 'superscript', 'subscript', 'removeformat', 'formatmatch', 'autotypeset','pasteplain', 'forecolor', 'backcolor', 'insertorderedlist', 'insertunorderedlist', 'selectall', 'cleardoc',
                'rowspacingtop', 'rowspacingbottom', 'lineheight', 
                 'paragraph', 'fontfamily', 'fontsize',  
                'justifyleft', 'justifycenter', 'justifyright', 'justifyjustify',  'touppercase', 'tolowercase',
                'print',
            ]]
            }
    );
   ue.render("editor");
</script>

<script>
    $("#file-5").fileinput({
        showUpload: true,
        showCaption: false,
        uploadUrl: '#', // you must set a valid URL here else you will get an error
        allowedFileExtensions : ['jpg', 'png','gif'],
        overwriteInitial: false,
        maxFileSize: 200,
        maxFilesNum: 10,
        //allowedFileTypes: ['image', 'video', 'flash'],
        browseClass: "btn btn-primary btn-lg",
        previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
        slugCallback: function(filename) {
            return filename.replace('(', '_').replace(']', '_');
        }
    });
    $("#file-6").fileinput({
        showUpload: true,
        showCaption: false,
        uploadUrl: '#', // you must set a valid URL here else you will get an error
        allowedFileExtensions : ['jpg', 'png','gif'],
        overwriteInitial: false,
        maxFileSize: 50,
        maxFilesNum: 10,
        //allowedFileTypes: ['image', 'video', 'flash'],
        browseClass: "btn btn-primary btn-lg",
        previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
        slugCallback: function(filename) {
            return filename.replace('(', '_').replace(']', '_');
        }
    });
</script>
    <script src="src/js/xiugai.js"></script>
    <script type="text/javascript">
$(window).load(function() {
    var options =
    {
        thumbBox: '.thumbBox',
        spinner: '.spinner',
        imgSrc: './src/css/crop/e.png'
    }
    var cropper = $('.imageBox').cropbox(options);
    $('#choiceImg').on('change', function(){   
        var reader = new FileReader();
        reader.onload = function(e) {
            options.imgSrc = e.target.result;
            cropper = $('.imageBox').cropbox(options);
        }
        if(this.files[0]){
            reader.readAsDataURL(this.files[0]); 
             $('#btnUpLoad').removeClass('hide')
            $('#btnRemove').removeClass('hide') 
            $('.imageBox').removeClass('hide')  
        } 
     
        $('#choiceImg').val('')    
        /*this.files = [];*/
                   
    })
    $('#btnUpLoad').on('click', function(){
            
            var img = cropper.getDataURL();
            /*console.log(img)
             var pic = img.replace('data:image/png;base64,','');
             var formData = new FormData(img); 
             console.log(formData)
            $.ajax({
        type: 'POST',
        url: 'http://127.0.0.1:3000/upload',
        data: formData,
        dataType: 'json',
        success: function () {
            console.log("Done, Picture Uploaded.");
        },
        error:function(){console.log('error')}
    });*/
    var formData = new FormData();  
    formData.append("upload",convertBase64UrlToBlob(img))
     console.log(formData)
     $.ajax({  
          url: 'http://127.0.0.1:3000/upload' ,  
          type: 'POST',  
          data: formData,  
          async: false,  
          cache: false,  
          contentType: false,  
          processData: false,  
          success: function (returndata) {  
          },  
          error: function (returndata) {  
          }  
     });    

/*var xhr = new XMLHttpRequest();
xhr.open("post", "http:localhost:3000/upload", true);　 
xhr.onreadystatechange = function () {
if (xhr.readyState == 4 && xhr.status == 200) {
console.log('pk');
}
}
xhr.send(pic);*/
/*$.post("http://127.0.0.1:3000/upload",img,function(res) {
    console.log(res);
});*/
/*fetch('http://127.0.0.1:3000/upload', {
      method: 'POST',
      mode: "cors",
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      data:pic,
      body: JSON.stringify({
        name: 'Hubot',
        login: 'hubot',
      })
    });*/

        $('.cropped').html('');
        $('.cropped').append('<img src="'+img+'" align="absmiddle" style="width:64px;margin-top:4px;border-radius:64px;box-shadow:0px 0px 12px #7E7E7E;" ><p>64px*64px</p>');
        /*$('.cropped').append('<img src="'+img+'" align="absmiddle" style="width:128px;margin-top:4px;border-radius:128px;box-shadow:0px 0px 12px #7E7E7E;"><p>128px*128px</p>');
        $('.cropped').append('<img src="'+img+'" align="absmiddle" style="width:180px;margin-top:4px;border-radius:180px;box-shadow:0px 0px 12px #7E7E7E;"><p>180px*180px</p>');*/
    })
    function convertBase64UrlToBlob(urlData){
    
    var bytes=window.atob(urlData.split(',')[1]);        //去掉url的头，并转换为byte
    
    //处理异常,将ascii码小于0的转换为大于0
    var ab = new ArrayBuffer(bytes.length);
    var ia = new Uint8Array(ab);
    for (var i = 0; i < bytes.length; i++) {
        ia[i] = bytes.charCodeAt(i);
    }

    return new Blob( [ab] , {type : 'image/png'});
}
    $('#btnZoomIn').on('click', function(){
        cropper.zoomIn();
    })
    $('#btnZoomOut').on('click', function(){
        cropper.zoomOut();
    })
    $('#btnRemove').on('click', function(){
        if(!$('#btnRemove').hasClass('hide')){
            $('#btnUpLoad').addClass('hide')
            $('#btnRemove').addClass('hide') 
            $('.imageBox').addClass('hide')
        }
    })
});
</script>
<script> $('#modifyPaswd').modal({backdrop: 'static', keyboard: false,show: false});</script>
</body>

</html>
